{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef, useCallback } from 'react';\nexport function useVoiceControl(language = 'es', onInput) {\n  _s();\n  const [isListening, setIsListening] = useState(false);\n  const [error, setError] = useState(null);\n  const recognitionRef = useRef(null);\n  useEffect(() => {\n    if (typeof window !== 'undefined' && ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = language === 'es' ? 'es-ES' : 'en-US';\n      recognitionRef.current.onstart = () => {\n        setIsListening(true);\n        setError(null);\n      };\n      recognitionRef.current.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        if (onInput) onInput(transcript);\n        setError(null);\n      };\n      recognitionRef.current.onerror = event => {\n        setIsListening(false);\n        // Translate common errors to user-friendly messages\n        let message = 'Error de voz';\n        if (event.error === 'network') message = 'Sin conexi贸n';\n        if (event.error === 'not-allowed') message = 'Permiso denegado';\n        if (event.error === 'no-speech') message = 'No se escuch贸 nada';\n        console.warn('Speech recognition status:', event.error); // Warn instead of error\n        setError(message);\n      };\n      recognitionRef.current.onend = () => setIsListening(false);\n    } else {\n      setError('No compatible');\n    }\n  }, [language, onInput]);\n  const toggleVoiceRecognition = useCallback(() => {\n    if (!recognitionRef.current) {\n      setError('No soportado');\n      return;\n    }\n    try {\n      if (isListening) {\n        recognitionRef.current.stop();\n      } else {\n        setError(null);\n        recognitionRef.current.start();\n      }\n    } catch (e) {\n      console.warn(\"Voice toggle error:\", e);\n      // Reset if stuck\n      setIsListening(false);\n    }\n  }, [isListening]);\n  return {\n    isListening,\n    toggleVoiceRecognition,\n    error\n  };\n}\n_s(useVoiceControl, \"uWOsPlFd+MTB6vrRExlT/dumAhU=\");","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","useVoiceControl","language","onInput","_s","isListening","setIsListening","error","setError","recognitionRef","window","SpeechRecognition","webkitSpeechRecognition","current","continuous","interimResults","lang","onstart","onresult","event","transcript","results","onerror","message","console","warn","onend","toggleVoiceRecognition","stop","start","e"],"sources":["C:/Users/pipog/nexa-os-complete/nexa-ai-panel/src/hooks/useVoiceControl.js"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from 'react';\n\nexport function useVoiceControl(language = 'es', onInput) {\n  const [isListening, setIsListening] = useState(false);\n  const [error, setError] = useState(null);\n  const recognitionRef = useRef(null);\n\n  useEffect(() => {\n    if (typeof window !== 'undefined' && ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = language === 'es' ? 'es-ES' : 'en-US';\n\n      recognitionRef.current.onstart = () => {\n        setIsListening(true);\n        setError(null);\n      };\n\n      recognitionRef.current.onresult = (event) => {\n        const transcript = event.results[0][0].transcript;\n        if (onInput) onInput(transcript);\n        setError(null);\n      };\n\n      recognitionRef.current.onerror = (event) => {\n        setIsListening(false);\n        // Translate common errors to user-friendly messages\n        let message = 'Error de voz';\n        if (event.error === 'network') message = 'Sin conexi贸n';\n        if (event.error === 'not-allowed') message = 'Permiso denegado';\n        if (event.error === 'no-speech') message = 'No se escuch贸 nada';\n        \n        console.warn('Speech recognition status:', event.error); // Warn instead of error\n        setError(message);\n      };\n\n      recognitionRef.current.onend = () => setIsListening(false);\n    } else {\n      setError('No compatible');\n    }\n  }, [language, onInput]);\n\n  const toggleVoiceRecognition = useCallback(() => {\n    if (!recognitionRef.current) {\n        setError('No soportado');\n        return;\n    }\n    \n    try {\n        if (isListening) {\n          recognitionRef.current.stop();\n        } else {\n          setError(null);\n          recognitionRef.current.start();\n        }\n    } catch (e) {\n        console.warn(\"Voice toggle error:\", e);\n        // Reset if stuck\n        setIsListening(false);\n    }\n  }, [isListening]);\n\n  return { isListening, toggleVoiceRecognition, error };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}