graph TD
    %% Estilos
    classDef cloud fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef local fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px;
    classDef user fill:#fff3e0,stroke:#ff6f00,stroke-width:2px;

    %% Nodos
    User((ðŸ‘¤ Usuario)):::user
    DNS[ðŸŒ Namecheap DNS]:::cloud
    
    subgraph Vercel_Edge [âš¡ Vercel Edge Network]
        UI[ðŸ–¥ï¸ Frontend Next.js]:::cloud
        Proxy[ðŸ”€ Reverse Proxy]:::cloud
    end

    subgraph Render_Cloud [â˜ï¸ Render Cloud]
        API[ðŸš€ Backend FastAPI]:::cloud
        Geo[ðŸŒ GeolocalizaciÃ³n]:::cloud
        Hook[ðŸ”” Webhook Service]:::cloud
    end

    subgraph Local_Sanctuary [ðŸ  Sovereign Local Hardware]
        Tunnel[ðŸ›¡ï¸ Secure Tunnel]:::local
        Ollama[ðŸ§  Ollama AI]:::local
        Models[(ðŸ“¦ DeepSeek/Qwen)]:::local
    end

    Discord[ðŸ’¬ Discord/Slack]:::cloud

    %% Flujos
    User -->|HTTPS| DNS
    DNS -->|ResoluciÃ³n| UI
    UI -->|API Request| Proxy
    Proxy -->|/api/py/*| API
    
    API -->|LÃ³gica| Geo
    API -->|NotificaciÃ³n| Hook
    Hook -->|JSON Payload| Discord
    
    %% Flujo AI (HÃ­brido)
    API -.->|Secure Request| Tunnel
    Tunnel -.->|Inference| Ollama
    Ollama -.->|Load| Models
    Ollama -.->|Response| Tunnel
    Tunnel -.->|JSON| API

    %% Leyenda
    linkStyle 0,1,2,3,4,5,6 stroke:#333,stroke-width:2px;
    linkStyle 7,8,9,10,11 stroke:#2e7d32,stroke-width:2px,stroke-dasharray: 5 5;
